(this["webpackJsonpstore-grecia-garcia"]=this["webpackJsonpstore-grecia-garcia"]||[]).push([[0],{15:function(e,t,c){},16:function(e,t,c){"use strict";c.r(t);c(8);var n=c(1),s=c.n(n),r=c(7),a=c.n(r),i=c(2),o=c.p+"static/media/coin.b8bc711d.svg",u=c(3),l=c.n(u),d=c(4),j={"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGM5NjA3ODliNzc4MTAwMjA5YzVhZDAiLCJpYXQiOjE2MjM4MTAxNjh9.bv_8didOSh4ulyq7X2-26eWwS6bjFfRdhTjrVGu9Nsg"},b="https://coding-challenge-api.aerolab.co/user/me",h="https://coding-challenge-api.aerolab.co/user/points",m="https://coding-challenge-api.aerolab.co/products",O="https://coding-challenge-api.aerolab.co/redeem",x=1e3,p=5e3,f=7500;function v(){return(v=Object(d.a)(l.a.mark((function e(t){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(h,{method:"POST",headers:j,body:JSON.stringify({amount:t})});case 3:return c=e.sent,e.next=6,c.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var g=function(e){return v.apply(this,arguments)};function N(){return(N=Object(d.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(b,{method:"GET",headers:j});case 3:return t=e.sent,e.next=6,t.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var y=function(){return N.apply(this,arguments)},C=c(0),P=s.a.createContext(),k=function(e){var t=s.a.useState({}),c=Object(i.a)(t,2),n=c[0],r=c[1],a=s.a.useState(0),o=Object(i.a)(a,2),u=o[0],l=o[1],d=s.a.useState(!1),j=Object(i.a)(d,2),b=j[0],h=j[1],m=s.a.useState([]),O=Object(i.a)(m,2),x=O[0],p=O[1];return s.a.useEffect((function(){y().then((function(e){r(e),l(e.points),p(e.redeemHistory)}))}),[]),Object(C.jsx)(P.Provider,{value:{users:n,setUsers:r,points:u,setPoints:l,history:b,setHistory:h,record:x},children:e.children})};var S=function(e){var t=s.a.useState(!1),c=Object(i.a)(t,2),n=c[0],r=c[1],a=s.a.useContext(P),u=a.points,l=a.setPoints,d=s.a.useState(""),j=Object(i.a)(d,2),b=j[0],h=j[1];s.a.useEffect((function(){n&&setTimeout((function(){r(!1)}),3e3)}),[n]);var m=function(e){g(e).then((function(t){t&&"Points Updated"===t.message?(l(u+e),r(!0),h(t.message)):(r(!0),h("Error, try again later."))}))};return Object(C.jsx)("section",{className:"modal-screen",children:Object(C.jsxs)("div",{className:"addCoins",children:[Object(C.jsx)("div",{children:n&&Object(C.jsx)("div",{className:"Points Updated"===b?"successEnabled successAddPoints colorAddPointsSuccess":"successEnabled successAddPoints colorAddPointsError",children:Object(C.jsxs)("h6",{className:"success-pointsSuccess",children:[" ",b," "]})})}),Object(C.jsx)("h4",{className:"title-addCoins",children:" Add more coins "}),Object(C.jsxs)("button",{className:"button-addCoins one",onClick:function(){return m(x)},children:[Object(C.jsx)("img",{src:o,alt:x}),x]}),Object(C.jsxs)("button",{className:"button-addCoins two",onClick:function(){return m(p)},children:[Object(C.jsx)("img",{src:o,alt:p}),p]}),Object(C.jsxs)("button",{className:"button-addCoins three",onClick:function(){return m(f)},children:[Object(C.jsx)("img",{src:o,alt:f}),f]}),Object(C.jsx)("button",{className:"close",onClick:function(){return e.setModal(!1)},children:" X "})]})})};var w=function(){var e=s.a.useState(!1),t=Object(i.a)(e,2),c=t[0],n=t[1],r=s.a.useContext(P),a=r.users,u=r.points,l=r.history,d=r.setHistory;return Object(C.jsxs)("header",{className:"header",children:[Object(C.jsxs)("div",{className:"headerOptions",children:[Object(C.jsxs)("div",{className:"historyButtons",children:[Object(C.jsx)("h2",{className:"historyText",onClick:function(){return d(!0)},style:{display:l?"none":"block"},children:"History"}),Object(C.jsx)("h2",{onClick:function(){return d(!1)},style:{display:l?"block":"none"},children:"Catalog"})]}),Object(C.jsxs)("div",{className:"userNameInfo",children:[Object(C.jsxs)("h6",{className:"userName",children:[" ",a.name," "]}),Object(C.jsxs)("button",{className:"button-headerCoins",onClick:function(){return n(!0)},children:[u,Object(C.jsx)("img",{src:o,alt:"coin"})]})]})]}),c?Object(C.jsx)(S,{setModal:n}):null,Object(C.jsx)("div",{className:"container-header",children:Object(C.jsx)("h6",{className:"title-header",children:" Electronics "})})]})},E=(c(15),c(5)),A=c.p+"static/media/buy-blue.c5c4f01c.svg";function I(){return(I=Object(d.a)(l.a.mark((function e(t){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O,{method:"POST",headers:j,body:JSON.stringify({productId:t})});case 3:return c=e.sent,e.next=6,c.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var M=function(e){return I.apply(this,arguments)};var T=function(e){var t=Object(n.useState)(!1),c=Object(i.a)(t,2),r=c[0],a=c[1],u=Object(n.useState)(""),l=Object(i.a)(u,2),d=l[0],j=l[1],b=s.a.useContext(P),h=b.points,m=b.setPoints;return Object(C.jsxs)("div",{className:"card",style:{width:"18rem"},onMouseOver:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:[Object(C.jsx)("img",{src:e.img.url,className:r?"img-hovered card-img-top":"card-img-top",alt:e.name}),Object(C.jsxs)("div",{className:"card-body",children:[Object(C.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:e.category}),Object(C.jsx)("h6",{className:"card-title",children:e.name}),Object(C.jsx)("button",{type:"button",className:"btn btn-dark",disabled:e.cost>h,onClick:function(){return t=e._id,c=e.cost,void M(t).then((function(e){j(e.message),m(h<=0?0:h-c)}));var t,c},children:"Redeem now"})]}),Object(C.jsx)("div",{className:"card-hovered",children:Object(C.jsxs)("div",{className:"buttons-card-hovered ml-2",children:[Object(C.jsx)("img",{className:"buy",src:A,alt:"buy"}),Object(C.jsxs)("h5",{className:"card-cost",children:[" ",e.cost<=h?e.cost:"You need "+(e.cost-h)," "]}),Object(C.jsx)("img",{className:"coin",src:o,alt:"coin"})]})}),"You've redeem the product successfully"===d?Object(C.jsxs)("div",{className:"product-modal",children:[Object(C.jsx)("button",{className:"close",id:"closeSuccessRedeeem",onClick:function(){return j("")},children:" X "}),Object(C.jsx)("div",{className:"product-modal-div",children:Object(C.jsxs)("h4",{className:"successRedeem",children:[" ",d," "]})})]}):"undefined"===typeof d?Object(C.jsxs)("div",{className:"product-modal-failed",children:[Object(C.jsx)("button",{className:"close",id:"closeSuccessRedeeem",onClick:function(){return j("")},children:" X "}),Object(C.jsx)("div",{className:"product-modal-div",children:Object(C.jsx)("h4",{className:"successRedeem",children:" Error, try again. "})})]}):null]})};function F(){return(F=Object(d.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(m,{method:"GET",headers:j});case 3:return t=e.sent,e.next=6,t.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var J=function(){return F.apply(this,arguments)},R=function(e,t){var c=s.a.useState(1),n=Object(i.a)(c,2),r=n[0],a=n[1],o=Math.ceil(e.length/t),u=e.slice((r-1)*t,r*t);return{next:function(){a(r+1)},prev:function(){a(r-1)},jump:function(e){a(e)},currentPage:r,maxPage:o,currentArray:u}},L=function(){var e=s.a.useState([]),t=Object(i.a)(e,2),c=t[0],n=t[1],r=s.a.useState("recent"),a=Object(i.a)(r,2),o=a[0],u=a[1],l=s.a.useContext(P).history;s.a.useEffect((function(){J().then((function(e){return n(e)}))}),[]);var d=R(function(){switch(o){case"lowPrice":return c.sort((function(e,t){return parseFloat(e.cost)-parseFloat(t.cost)})).map((function(e,t){return Object(C.jsx)(T,Object(E.a)({},e),t)}));case"highPrice":return c.sort((function(e,t){return parseFloat(t.cost)-parseFloat(e.cost)})).map((function(e,t){return Object(C.jsx)(T,Object(E.a)({},e),t)}));default:return c.sort((function(e,t){return e._id<t._id?-1:1})).map((function(e,t){return Object(C.jsx)(T,Object(E.a)({},e),t)}))}}(),16),j=d.currentArray,b=d.next,h=d.prev,m=d.maxPage,O=d.currentPage;return Object(C.jsxs)("section",{style:{display:l?"none":"block"},children:[Object(C.jsxs)("section",{className:"filters",children:[Object(C.jsx)("button",{className:"btn btn-dark m-1",onClick:function(){return u("recent")},children:"Most recent"}),Object(C.jsx)("button",{className:"btn btn-dark m-1",onClick:function(){return u("lowPrice")},children:"Lowest price"}),Object(C.jsx)("button",{className:"btn btn-dark m-1",onClick:function(){return u("highPrice")},children:"Highest price"})]}),Object(C.jsx)("section",{className:"container-cards",children:j}),Object(C.jsxs)("section",{className:"buttonsPagination",children:[Object(C.jsx)("button",{className:"btnPaginationLeft",onClick:function(){return h()},disabled:O<=1}),Object(C.jsx)("button",{className:"btnPaginationRight",onClick:function(){return b()},disabled:O>=m})]})]})},X=function(){var e=s.a.useContext(P),t=e.history,c=e.record,n=R(c,16),r=n.currentArray,a=n.next,i=n.prev,o=n.maxPage,u=n.currentPage;return Object(C.jsxs)("div",{style:{display:t?"block":"none"},children:[Object(C.jsxs)("table",{children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:" Product Id "}),Object(C.jsx)("th",{children:" Product Name "}),Object(C.jsx)("th",{children:" Product Cost "})]})}),Object(C.jsx)("tbody",{children:r.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.productId}),Object(C.jsx)("td",{children:e.name}),Object(C.jsx)("td",{children:e.cost})]},e.productId+t)}))})]}),Object(C.jsxs)("section",{className:"buttonsPagination",children:[Object(C.jsx)("button",{className:"btnPaginationLeft",onClick:function(){return i()},disabled:u<=1}),Object(C.jsx)("button",{className:"btnPaginationRight",onClick:function(){return a()},disabled:u>=o})]})]})};var G=function(){return Object(C.jsx)("div",{className:"App",children:Object(C.jsxs)(k,{children:[Object(C.jsx)(w,{}),Object(C.jsx)(L,{}),Object(C.jsx)(X,{})]})})},H=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,17)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),n(e),s(e),r(e),a(e)}))};a.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(G,{})}),document.getElementById("root")),H()}},[[16,1,2]]]);
//# sourceMappingURL=main.3562cc22.chunk.js.map